<!doctype HTML>
<html>
  <head>
    <script src="quad.js"></script>
    <script src="grid.js"></script>
    <script src="glyphgrid.js"></script>
    <script src="renderer.js"></script>
    <script src="main.js"></script>
  </head>
  <body style="margin: 0;">
    <canvas id="canvas" width="300" height="150" style="width: 300px; height: 150px; border: 1px solid black;"></canvas>
    <br/> 
    <input id="str" type="text"></input>
  </body>
  <script id="clip-space-vs" type="x-shader/x-vertex">#version 300 es
  
		in vec2 a_position;
		in vec2 a_uv;
		
    uniform vec2 u_resolution;
		
    out vec2 v_uv;
		
		void main() {
    	v_uv = a_uv;
    	vec2 zeroToOne = vec2(a_position.x / u_resolution.x, a_position.y / u_resolution.y);
    	//vec2 zeroToTwo = a_position * 2.0;
    	//vec2 clipSpace = zeroToTwo - 1.0;
    	gl_Position = vec4(zeroToOne * 500.0, 0, 1);
      //gl_Position = vec4(a_position, 0, 1);
  	}
  </script>
  <script id="simple-texture-fs" type="x-shader/x-fragment">#version 300 es

		precision mediump float;
		
    in vec2 v_uv;
    
    uniform sampler2D u_image;
		 
    out vec4 outColor;
		
    void main() {
			outColor = vec4(0.3, 1, 0.3, 1) * texture(u_image, v_uv);
			//outColor = vec4(1, 0, 0, 1);
  	}
  </script>
  <script id="other-texture-fs" type="x-shader/x-fragment">#version 300 es
 		
		precision mediump float;
		
		uniform sampler2D u_image;
		in vec2 v_uv;
    out vec4 outColor;

		void main() {
			vec4 sum = vec4(0.0);

			//our original texcoord for this fragment
			vec2 tc = v_uv;

			float blur = 0.003; 

			//the direction of our blur
			//(1.0, 0.0) -> x-axis blur
			//(0.0, 1.0) -> y-axis blur
			float hstep = 1.0;
			float vstep = 0.0;

			//apply blurring, using a 9-tap filter with predefined gaussian weights

			sum += texture(u_image, vec2(tc.x - 4.0*blur*hstep, tc.y - 4.0*blur*vstep)) * 0.0162162162;
			sum += texture(u_image, vec2(tc.x - 3.0*blur*hstep, tc.y - 3.0*blur*vstep)) * 0.0540540541;
			sum += texture(u_image, vec2(tc.x - 2.0*blur*hstep, tc.y - 2.0*blur*vstep)) * 0.1216216216;
			sum += texture(u_image, vec2(tc.x - 1.0*blur*hstep, tc.y - 1.0*blur*vstep)) * 0.1945945946;

			sum += texture(u_image, vec2(tc.x, tc.y)) * 0.2270270270;

			sum += texture(u_image, vec2(tc.x + 1.0*blur*hstep, tc.y + 1.0*blur*vstep)) * 0.1945945946;
			sum += texture(u_image, vec2(tc.x + 2.0*blur*hstep, tc.y + 2.0*blur*vstep)) * 0.1216216216;
			sum += texture(u_image, vec2(tc.x + 3.0*blur*hstep, tc.y + 3.0*blur*vstep)) * 0.0540540541;
			sum += texture(u_image, vec2(tc.x + 4.0*blur*hstep, tc.y + 4.0*blur*vstep)) * 0.0162162162;

			//discard alpha for our simple demo, multiply by vertex color and return
			outColor = vec4(sum.rgb, 1.0);
		}	
		/*	
		void main() { 
			vec4 color = vec4(0.0);
			vec2 off1 = vec2(1.3333333333333333) * 10.;
			color += texture(u_image, v_uv) * 0.29411764705882354;
			color += texture(u_image, v_uv + (off1)) * 0.35294117647058826;
			color += texture(u_image, v_uv - (off1)) * 0.35294117647058826;
			outColor = color; 
		}
		*/	
		/*
		precision mediump float;
		uniform sampler2D u_image;
		in vec2 v_uv;
    out vec4 outColor;
    void main() {
			outColor = vec4(1.1, 1.1, 0.9, 1) * texture(u_image, v_uv);
			//outColor = vec4(1, 0, 0, 1);
  	}
		*/	
  </script>
</html>
